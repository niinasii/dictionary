<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Dictionary fullstackharjoitus ulkoisilla restpalveluilla</title>
    <link rel="stylesheet" href="stylesheets/style.css" />
</head>

<body>
    <h1>Dictionary by Otto & Niina</h1>
    <main>
        <p>This is practise project in training course in Academy. You can lookup definitions for words, if the word is
            not found, then you'll get alternatives that are spelled similarly as the one you tried.
            The lookup is done using the (unofficial) Google Dictionary API. Synonyms and "trigger" words are from
            datamuse API. The searches are done in the server for this app.
            There are some issues with the services, e.g. some times a word is not found, although it was found a minute
            earlier and/or later. </p>
    </main>
    <form action="http://localhost:3000/api/" method="GET">
        <label for="hakusana" id="haelabel">Hakusana(t):</label>
        <input type="text" name="define" id="hae">
        <button type="button" id="nappi">Hae</button>
    </form>

    <section id="tulos"></section>
    <hr>
    <section id="history"></section>
    <hr>
    <section id="datamuse"></section>


    <script>
        /*
                document.getElementById("nappi").addEventListener("click", haeData);
        
                function haeData(event) {
        
                    fetch('http://localhost:3000/testi2.json')
                        .then(function (response) {
                            return response.json();
                        })
                        .then(function (data) {
                            lis채채Data(data);
                        })
                        .catch(function (err) {
                            console.log(err);
                        });
        
                    function lis채채Data(data) {
                        let i;
                        let munData = "";
                        for (i in data) {
                            munData += data[i] + " " + "<br>";
                        }
                        document.getElementById('tulos').innerHTML = munData;
                        console.log("testi1");
                    }
                } */

        function appendData(data) {
            var munData = document.getElementById("tulos");
            for (let i = 0; i < data.length; i++) {
                let div = document.createElement("div");
                div.innerHTML =
                    'Word: ' + data[i].word + '<br>' +
                    'Phonetic: ' + data[i].phonetic + '<br>' +
                    'Origin: ' + data[i].origin + '<br>'
                munData.appendChild(div);
                console.log("testi3")
            } 
        }

            fetch('http://localhost:3000/testi2.json')
                .then(function (response) {
                    return response.json();
                })
                .then(function (data) {
                    appendData(data);
                })
                .catch(function (err) {
                    console.log(err);
                });

    </script>
</body>

</html>