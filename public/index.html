<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Dictionary fullstackharjoitus ulkoisilla restpalveluilla</title>
    <link rel="stylesheet" href="stylesheets/style.css" />
</head>

<body>
    <h1>Dictionary by Otto & Niina</h1>
    <main>
        <p>This is practise project in training course in Academy. You can lookup definitions for words, if the word is
            not found, then you'll get alternatives that are spelled similarly as the one you tried.
            The lookup is done using the (unofficial) Google Dictionary API. Synonyms and "trigger" words are from
            datamuse API. The searches are done in the server for this app.
            There are some issues with the services, e.g. some times a word is not found, although it was found a minute
            earlier and/or later. </p>
    </main>
    <label for="hakusana" id="haelabel">Hakusana(t):</label><input type="text" name="hakusana" id="hae">
    <button type="button" id="nappi">Hae</button>

    <div id="tulos">Tähän tulos</div>
    <hr>
    <div id="history">Tähän hakuhistoria</div>

    <script>
        // Tee fetch pyyntö nodepalvelimeen getillä + nappi jossa on tapahtumansitoja addeventlistener

        document.getElementById('nappi').addEventListener('click', function () {
            document.getElementById('tulos').innerHTML = munData; //munData menee tulos kenttään html:ssä
        });

        let munData = document.getElementById('tulos'); // uusi muuttuja munData, jonka arvoksi tulee html-dokumentista 
        fetch('//localhost:3000/') //mihin osoitteeseen tulee nodepalvelimen hakema data
            .then(function (response) { return response.json(); }) //sitten palauta vastaus json-muodossa (javascriptolio)
            .then(function (json) { //sitten tee function json parametrinä
                let word = json.word; //json tiedostosta word-keypair
                let meaning = json.meaning; //json tiedostosta meaning-keypair
                let noun = json.noun; //json tiedostosta noun-keypair
                let verb = json.verb; //jsontiedostosta verb-keypair
                munData.innerHTML = word + meaning + noun + verb; //munData sisällön määritys
            });

    </script>
</body>

</html>